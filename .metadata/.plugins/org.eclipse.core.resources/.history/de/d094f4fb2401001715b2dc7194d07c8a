import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.nio.ByteBuffer;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;

public class FileHandler {

	String filename;
	File file;
	
	public FileHandler(String name){
		this.filename = name;
		file = new File(filename);
		
		System.out.println(file.exists());
		
		if(!file.exists()){
			byte[] b = "0".getBytes();
			
			try{
				
				FileOutputStream fileOut = new FileOutputStream(file);
				
				fileOut.write(b);
				
				fileOut.close();
				
			} catch (FileNotFoundException e) {
				e.printStackTrace();
			} catch (IOException e) {
				e.printStackTrace();
			}
		}
	}
	
	public String read(){
		String out = null;
        try {
            // FileReader reads text files in the default encoding.
            FileInputStream fileIn = new FileInputStream(file);
            
            byte[] b = new byte[fileIn.available()];
            
            out = new String(intToByte(fileIn.read(b)), "UTF-8");
            
            fileIn.close();
            
        }
        catch(FileNotFoundException ex) {
            System.out.println(
                "Unable to open file '" + 
                filename + "'");                
        }
        catch(IOException ex) {
            System.out.println(
                "Error reading file '" 
                + filename + "'");                  
            // Or we could just do this: 
            // ex.printStackTrace();
        }
	
        
        return out;
	}
	
	public boolean write(String w){
		boolean completed = true;
		byte[] b = w.getBytes();
		try{
			
			FileOutputStream fileOut = new FileOutputStream(file);
			
			fileOut.write(b);
			
			fileOut.close();
			
		}
		catch(FileNotFoundException ex){
			completed = false;
            System.out.println(
                    "Unable to open file '" + 
                    filename + "'");
		}
		catch(IOException ex){
			completed = false;
            System.out.println(
                    "Error reading file '" 
                    + filename + "'");   
		}
		
		
		return completed;
		
	}

	public boolean write(int i) {
		
		boolean completed = true;

		byte[] b = intToByte(i);
		
		try{
			
			FileOutputStream fileOut = new FileOutputStream(file);
			
			fileOut.write(b);
			
			fileOut.close();
			
		}
		catch(FileNotFoundException ex){
			completed = false;
            System.out.println(
                    "Unable to open file '" + 
                    filename + "'");
		}
		catch(IOException ex){
			completed = false;
            System.out.println(
                    "Error reading file '" 
                    + filename + "'");   
		}
		
		
		return completed;
		
	}
	
	byte[] intToByte(int i){
		
		System.out.println(i);
		
		ByteBuffer buffer = ByteBuffer.allocate(10);
		buffer.putInt(i);
		byte[] b = buffer.array();
		
		System.out.println(b);
		
		return b;
		
	}
	
}
