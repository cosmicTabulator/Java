package graphics;

import java.awt.Dimension;
import java.awt.Graphics2D;
import java.awt.Toolkit;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.image.BufferedImage;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class Console {

	int height;
	int width;
	
	JFrame frame;
	
	public Console(int w, int h){
		
		this.height = h;
		this.width = w;
		
		frame = new JFrame();
		frame.setSize(w, h);
		frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		
		Dimension dim = Toolkit.getDefaultToolkit().getScreenSize();
		frame.setLocation(dim.width/2-frame.getSize().width/2, dim.height/2-frame.getSize().height/2);
		
		//Create a dynamic image and attach it to the window
		image = new BufferedImage(width, hieght, BufferedImage.TYPE_INT_RGB);
		pane = new JLabel(new ImageIcon(image));
		
		image = toCompatibleImage(image);
		
		Graphics2D g = image.createGraphics();
		
		g.dispose();
		
		//Create a key listener, attach it to the window
		KeyListener keylistener = new KeyListener(){

			@Override
			public void keyTyped(KeyEvent e) {
				// TODO Auto-generated method stub
				
			}

			@Override
			public void keyPressed(KeyEvent e) {
				// TODO Auto-generated method stub
				
				//When a key is pressed, add it to our set of pressed keys
				int keyCode = e.getKeyCode();
				if(!keys.contains(keyCode)){
					keys.add(keyCode);
				}
				
			}

			@Override
			public void keyReleased(KeyEvent e) {
				// TODO Auto-generated method stub
				
				//When a key is released, remove it from our set of pressed keys
				int keyCode = e.getKeyCode();
				if(keys.contains(keyCode)){
					keys.remove(keyCode);
				}	
			}
		};
		
		//Finalizes our window
		frame.addKeyListener(keylistener);
		frame.setContentPane(pane);
		frame.pack();
		frame.setVisible(true);
		
	}
	
}
